<ion-view title="Messages">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>

  <ion-pane>
    <ion-scroll ng-style="style">
      <ion-list>
        <ion-item ng-repeat="message in messages | orderBy:'createdAt'" class="item-icon-right item-text-wrap" ng-class="{'left-margin' : message.sender, 'right-margin' : !message.sender, 'red-style': message.get('emergencyCode') === 'red', 'yellow-style': message.get('emergencyCode') === 'yellow'}">        
          <p style="font-size: 16pt">{{message.get('text')}}</p>
          <img ng-if="message.get('image')" ng-src="http://proxy.boxresizer.com/convert?resize=100x100&source={{message.get('image').url()}}" style="max-height: 200px" />
          <div ng-if="message.get('audio')">
            <button class="button icon ion-play" ng-click="toggleAudio(message)" style="position:absolute;left: 0;height:50px"></button>
          </div>
          <br />
          <i class="ion-clock"> </i><span am-time-ago="message.createdAt"></span>
        </ion-item>
      </ion-list>
  </ion-scroll>
  <div ng-style="chatboxStyle">
    <div class="row">
        <input type="text" style="width: 100%" ng-model="messageData.text" placeholder="Enter Message"/>
    </div>
    <div>
      <div style="width: 100%">
        <a class="button icon ion-camera" ng-click="imageSelect()"></a>
        <a class="button icon ion-mic-a" ng-click="audioSelect()"></a>        
        <a class="button icon ion-record" ng-style="emergencyStyle" ng-click="toggleEmergency()"></a>
        <a class="button icon ion-paper-airplane" ng-click="doSendMessage()" style="position: absolute; right: 0" ng-disabled="!messageData.text"></a>        
      </div>
      
        
      
    </div>

  </div>
  



  

  </ion-pane>
</ion-view>
